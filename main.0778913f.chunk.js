(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{159:function(e,t,a){e.exports=a(277)},164:function(e,t,a){},169:function(e,t){},171:function(e,t){},204:function(e,t){},205:function(e,t){},266:function(e,t,a){},277:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),r=a(14),o=a.n(r),c=(a(164),a(61)),i=a.n(c),l=a(98),h=a(12),m=a(23),u=a(24),d=a(25),p=a(26),k=a(146),b=a(75),g=a(21),f=a(288),v=a(289),E=a(76),y=a(158),w=a(147),S=a.n(w),C=a(99),T=a(149),O=a.n(T),N=a(105),j=a(51),A=a(104),B=a(155),x=a(62),I=a(52),D=(a(249),a(5)),z=a(150),R=a.n(z),_=a(74),M=a.n(_),U=a(37),F=a(39),L=a(282),P=a(283),V=a(284),J=a(285),q=a(286),H=a(287),W=a(100),G=a.n(W);a(266);function Y(){var e=Object(k.a)(["\n  display: block;\n  margin-top: 200px;\n  margin-left: auto;\n  margin-right: auto;\n  border-color: blue;\n"]);return Y=function(){return e},e}I.a.configure({autoClose:1e3,draggable:!1,hideProgressBar:!0});var K="http://localhost:3001/";function $(e){if(e.ok)return e;console.log(e.statusText)}function Q(e){return"sport"===e?"SPORTS":"world"===e||"politics"===e||"business"===e||"technology"===e||"sports"===e?e.toUpperCase():"health".toUpperCase()}var X=Object(D.css)(Y()),Z=function(e){var t=e.source,a=e.handler;return s.a.createElement(x.a,{show:!0,onHide:a},s.a.createElement(x.a.Header,{closeButton:!0},s.a.createElement(x.a.Title,null," ",t.webTitle)),s.a.createElement(x.a.Body,null,s.a.createElement("div",{className:"p-1 text-center paddedButtonDiv"},"Share via",s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement(L.a,{"data-tip":"Facebook","data-effect":"solid",url:t.url,hashtag:"#CSCI_571_NewsApp",children:s.a.createElement(P.a,{size:50,round:!0})}),s.a.createElement(V.a,{"data-tip":"Twitter","data-effect":"solid",url:t.url,hashtags:["CSCI_571_NewsApp"],children:s.a.createElement(J.a,{size:50,round:!0})}),s.a.createElement(q.a,{"data-tip":"Email","data-effect":"solid",url:t.url,subject:"#CSCI_571_NewsApp",children:s.a.createElement(H.a,{size:50,round:!0})}),s.a.createElement("br",null))))},ee=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={loading:!0},n}return Object(u.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"sweet-loading p-5"},s.a.createElement(R.a,{css:X,size:60,color:"#123abc",loading:this.props.loading}),s.a.createElement("div",{className:"loadingMessage"},"Loading..."))}}]),a}(n.Component),te=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).onInputChange=function(e,t){t.action;if(!(""===e||e.length<2)){var a="https://dulaimy.cognitiveservices.azure.com/bing/v7.0/suggestions?q=".concat(e);try{fetch(a,{headers:{"Ocp-Apim-Subscription-Key":"1e2e1fb6ae3741009656d0d25e5254f3"}}).then($).then((function(e){e&&e.json().then((function(e){try{var t=e.suggestionGroups[0].searchSuggestions.map((function(e){return{label:e.displayText,value:e.displayText}}));n.setState({results:t})}catch(a){}}))}))}catch(s){}}},n.handleResultSelect=function(e,t){var a=t.result;console.log("clicked: ".concat(e.value)),n.setState({selectedResult:a});var s=n.props.history;n.props.search(e.value),s.push("/search?q="+e.value)},n.state={results:[],selectedResult:null},n}return Object(u.a)(a,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(y.a,{placeholder:"Enter keyword ..",noOptionsMessage:function(){return"No matches"},value:this.props.searchValue,options:this.state.results,onInputChange:this.onInputChange,onChange:this.handleResultSelect}))}}]),a}(n.Component),ae=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={full:!1,sharing:!1},n.handleClick=n.handleClick.bind(Object(h.a)(n)),n.showToast=n.showToast.bind(Object(h.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){}},{key:"handleClick",value:function(){this.setState({full:!0})}},{key:"showToast",value:function(){this.setState({sharing:!this.state.sharing})}},{key:"render",value:function(){return this.state.full?s.a.createElement(U.a,{to:"/article?path="+this.props.source.id+"&type="+this.props.source.type}):s.a.createElement(s.a.Fragment,null,this.state.sharing&&s.a.createElement(Z,{source:this.props.source,handler:this.showToast}),s.a.createElement(se,{inSearch:this.props.inSearch,removeBookmark:this.props.removeBookmark,type:this.props.type,cols:this.props.cols,source:this.props.source,handler:this.handleClick,showToast:this.showToast,key:this.props.source.webTitle}))}}]),a}(n.Component),ne=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={expanded:!1,bookmarked:n.props.checked},n.expand=n.expand.bind(Object(h.a)(n)),n.addToBookmarks=n.addToBookmarks.bind(Object(h.a)(n)),n.myRef=s.a.createRef(),n}return Object(u.a)(a,[{key:"scroll",value:function(e){setTimeout((function(){e.current.scrollIntoView({behavior:"smooth",block:"start"})}),100)}},{key:"componentDidMount",value:function(){this.removeCommentBox=G()("5760999403552768-proj"),G()("5760999403552768-proj")}},{key:"componentWillUnmount",value:function(){this.removeCommentBox()}},{key:"expand",value:function(){var e=this;requestAnimationFrame((function(){e.setState({expanded:!e.state.expanded},e.scroll(e.myRef))}))}},{key:"addToBookmarks",value:function(){this.setState({bookmarked:!this.state.bookmarked});this.state.bookmarked?("Removing ",this.props.removeBookmark(this.props.source)):this.props.addBookmark(this.props.source)}},{key:"render",value:function(){var e=this.props.source,t=e.bodyText.replace(e.bodyTextSummary,""),a=t.length>0;return s.a.createElement(b.a,{fluid:!0},s.a.createElement(f.a,{className:"row articleCardDetailed mt-3 mb-5"},s.a.createElement(g.a,{xs:12,className:"articleSmallContent p-3"},s.a.createElement("div",{className:"articleTitleDetailed"}," ",e.webTitle," "),s.a.createElement("div",null,s.a.createElement("span",{className:"articleDateDetailed"},e.webPublicationDate.split("T")[0])),s.a.createElement("div",{className:"shareDetailed text-center"},s.a.createElement(L.a,{"data-tip":"Facebook","data-effect":"solid",url:e.url,hashtag:"#CSCI_571_NewsApp",children:s.a.createElement(P.a,{size:32,round:!0})}),s.a.createElement(V.a,{"data-tip":"Twitter","data-effect":"solid",url:e.url,hashtags:["CSCI_571_NewsApp"],children:s.a.createElement(J.a,{size:32,round:!0})}),s.a.createElement(q.a,{"data-tip":"Email","data-effect":"solid",url:e.url,subject:"#CSCI_571_NewsApp",children:s.a.createElement(H.a,{size:32,round:!0})}),s.a.createElement("div",{className:"bookmarkDetailed","data-tip":"Bookmark","data-effect":"solid",onClick:this.addToBookmarks}," ",this.state.bookmarked&&s.a.createElement(j.a,{color:"red",size:32})||s.a.createElement(j.b,{color:"red",size:32}),"  "),s.a.createElement(C.a,null))),s.a.createElement(g.a,{xs:12,className:"articleCardDetailedImage p-3"},s.a.createElement("img",{src:e.image})),s.a.createElement(g.a,{xs:12,id:"",className:"articleSummaryDetailed expanded-"+this.state.expanded,ref:this.myRef},e.bodyTextSummary+"\n\n\n\n",s.a.createElement("p",null,a&&t)),s.a.createElement("div",{className:"dropdown",onClick:a&&this.expand||null},a&&!this.state.expanded&&s.a.createElement(A.a,{size:25})||a&&s.a.createElement(A.b,{size:25}))),s.a.createElement(f.a,null," ",s.a.createElement(g.a,{xs:12,md:6,className:"commentbox",id:e.url})))}}]),a}(n.Component),se=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.type,t=this.props.cols,a=this.props.source,n=this.props.handler,r=this.props.showToast,o=this.props.inSearch,c=this.props.removeBookmark;return s.a.createElement(g.a,{className:"small"===e?"p-4 mt-3 mb-5":"articleCard mt-3 mb-5",xs:12,md:t},s.a.createElement(f.a,{className:"articleCard"},"small"!==e&&s.a.createElement(g.a,{xs:12,md:"small"===e?12:3,className:"articleCardImage p-3",onClick:n},s.a.createElement("img",{src:a.image})),s.a.createElement(g.a,{xs:12,md:"small"===e?12:9,className:"articleSmallContent p-3"},s.a.createElement("div",{className:"articleTitle"}," ",s.a.createElement("div",{className:"articleTitleText",onClick:n}," ",a.webTitle," ")," ",s.a.createElement(B.a,{size:15,onClick:r})," ","small"===e&&!o&&s.a.createElement(j.c,{size:15,onClick:function(){c(a)}})," "),s.a.createElement("div",{className:"articleSummary",onClick:n},"small"!==e&&s.a.createElement(O.a,{unsafeHTML:a.bodyTextSummary,maxLine:"3",ellipsis:"...",basedOn:"words"})),"small"===e&&s.a.createElement(g.a,{xs:12,md:"small"===e?12:3,className:"articleCardImage p-3",onClick:n},s.a.createElement("img",{src:a.image})),s.a.createElement("div",{className:"chiclets mt-3 mb-3"},s.a.createElement("span",{className:"articleDate"},a.webPublicationDate.split("T")[0]),s.a.createElement("span",{className:"articleType"},s.a.createElement(N.a,{variant:Q(a.sectionName).toLowerCase()},o?a.sectionName.toUpperCase():Q(a.sectionName))," ","small"===e&&!o&&s.a.createElement(N.a,{variant:"nyt"===a.type?"nFav":"gFav"},"nyt"===a.type?"NYTimes":"GUARDIAN"))))))}}]),a}(n.Component),re=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return s.a.createElement(f.a,null,s.a.createElement(g.a,{xs:12,md:4,className:"white newsLabel"},"NYTimes"),s.a.createElement(S.a,{className:"customSwitch",uncheckedIcon:!1,checkedIcon:!1,onColor:"#2487e9",offColor:"#d8d8d8",onChange:this.props.updateNewsSource,checked:this.props.checked}),s.a.createElement(g.a,{xs:12,md:4,className:"white newsLabel"},"Guardian"))}}]),a}(n.Component),oe=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).generatedCards=[],n.state={articles:[],nyArticles:[],gArticles:[]},n}return Object(u.a)(a,[{key:"fetchArticles",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,a,n,s,r=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("\n cold load"),t=this.props.appState.gUrl,a=this.props.appState.nUrl,""!==this.props.section&&(t+="/section/"+this.props.section,a+="/section/"+this.props.section),!(n=localStorage.getItem(t))){e.next=9;break}return s=JSON.parse(n),this.setState({nyArticles:s.nyArticles,gArticles:s.gArticles},this.swapArticles),e.abrupt("return");case 9:fetch(t).then((function(e){e&&e.json().then((function(e){try{fetch(a).then((function(a){a&&a.json().then((function(a){try{localStorage.setItem(t,JSON.stringify({nyArticles:a,gArticles:e})),r.setState({nyArticles:a,gArticles:e},r.swapArticles)}catch(n){}}))}))}catch(n){}}))}));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"swapArticles",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("swapping"),this.props.appState.checked?(this.generatedCards=this.state.gArticles.map((function(e){return s.a.createElement(ae,{cols:t.props.cols,source:e,key:e.webTitle})})),this.props.onComplete(!0),this.setState({articles:this.state.gArticles})):(this.generatedCards=this.state.nyArticles.map((function(e){return s.a.createElement(ae,{cols:t.props.cols,source:e,key:e.webTitle})})),this.props.onComplete(!0),this.setState({articles:this.state.nyArticles}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.fetchArticles()}},{key:"componentDidUpdate",value:function(e){this.generatedCards=[];var t=this.props.section!==e.section;this.props.appState.checked!==e.appState.checked&&!t?this.swapArticles():t&&this.fetchArticles()}},{key:"render",value:function(){return this.generatedCards.length>0?s.a.createElement(f.a,null," ",this.generatedCards," "):s.a.createElement(ee,null,"Loading...")}}]),a}(n.Component),ce=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={articles:[]},n}return Object(u.a)(a,[{key:"fetchArticle",value:function(e){var t=this,a=K+"search?q="+e;try{fetch(a).then((function(e){e&&e.json().then((function(e){try{t.setState({articles:e})}catch(a){}}))}))}catch(n){}}},{key:"componentDidMount",value:function(){this.props.hideToggle();var e=M.a.parse(this.props.location.search).q;this.fetchArticle(e)}},{key:"render",value:function(){var e=this;return this.state.articles.length>0?s.a.createElement(s.a.Fragment,null,s.a.createElement("h2",{className:"centered mt-3"},"Results"),s.a.createElement(f.a,null,this.state.articles.map((function(t){return s.a.createElement(ae,{type:"small",inSearch:!0,cols:3,source:t,key:t.webTitle,handler:e.handleClick})})))):s.a.createElement(ee,null,"Loading...")}}]),a}(n.Component),ie=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={article:{}},n}return Object(u.a)(a,[{key:"fetchArticle",value:function(e,t){var a=this,n=K+"guardian/grab?path="+e;"g"!==t&&(n=K+"nyt/grab?path="+e);try{fetch(n).then((function(e){e&&e.json().then((function(e){try{a.setState({article:e[0]})}catch(t){}}))}))}catch(s){console.log("fetch mistake")}}},{key:"componentDidMount",value:function(){this.props.hideToggle(),this.props.resetSearch();var e=M.a.parse(this.props.location.search).path,t=M.a.parse(this.props.location.search).type;this.fetchArticle(e,t)}},{key:"render",value:function(){return this.state.article.webTitle?s.a.createElement(ne,{source:this.state.article,checked:this.props.inBookmarks(this.state.article),addBookmark:this.props.addBookmark,removeBookmark:this.props.removeBookmark,handler:this.handleClick,key:this.state.article.webTitle}):s.a.createElement(ee,null,"Loading...")}}]),a}(n.Component),le=Object(U.g)(te),he=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(m.a)(this,a),(n=t.call(this,e)).state={checked:"true"==localStorage.getItem("checked")||!1,gUrl:K+"guardian",nUrl:K+"nyt",isChanging:!0,showBookmarks:!1,showToggle:!0,bookmarkedArticles:[],searchValue:null};var s=localStorage.getItem("bookmarks");return s&&(n.state.bookmarkedArticles=JSON.parse(s)),n.updateNewsSource=n.updateNewsSource.bind(Object(h.a)(n)),n.doneSwitchingArticles=n.doneSwitchingArticles.bind(Object(h.a)(n)),n.showBookmarked=n.showBookmarked.bind(Object(h.a)(n)),n.showToggle=n.showToggle.bind(Object(h.a)(n)),n.hideToggle=n.hideToggle.bind(Object(h.a)(n)),n.search=n.search.bind(Object(h.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){document.title="CSCI 571 NewsApp",this.setState({showToggle:!0})}},{key:"updateNewsSource",value:function(e){this.setState({checked:e,isChanging:!0}),localStorage.setItem("checked",e)}},{key:"doneSwitchingArticles",value:function(){this.setState({isChanging:!1}),console.log("from parent doneChange: ",this.state.isChanging)}},{key:"showBookmarked",value:function(){this.state.showBookmarks?this.setState({showBookmarks:!1,showToggle:!0}):this.setState({showBookmarks:!0})}},{key:"hideToggle",value:function(){this.setState({showToggle:!1})}},{key:"showToggle",value:function(){this.setState({showToggle:!0,showBookmarks:!1,searchValue:null})}},{key:"removeBookmark",value:function(e){var t=this.state.bookmarkedArticles.filter((function(t){return t.url!==e.url}));this.setState({bookmarkedArticles:t}),localStorage.setItem("bookmarks",JSON.stringify(t)),Object(I.a)("Removing "+e.webTitle,{className:"foo-bar",position:I.a.POSITION.TOP_CENTER})}},{key:"inBookmarks",value:function(e){return this.state.bookmarkedArticles.some((function(t){return t.url===e.url}))}},{key:"addBookmark",value:function(e){var t=this.state.bookmarkedArticles;this.inBookmarks(e)||(t.push(e),this.setState({bookmarkedArticles:t}),Object(I.a)("Saving "+e.webTitle,{className:"foo-bar",position:I.a.POSITION.TOP_CENTER}),localStorage.setItem("bookmarks",JSON.stringify(t)))}},{key:"resetSearch",value:function(){this.setState({searchValue:null})}},{key:"search",value:function(e){console.log(e),this.setState({searchValue:{value:e,label:e}})}},{key:"render",value:function(){var e=this;return s.a.createElement(b.a,{fluid:!0},s.a.createElement(F.a,null,s.a.createElement(E.a,{bg:"grad",expand:"lg",variant:"dark"},s.a.createElement(g.a,{xs:10,md:4},s.a.createElement(le,{search:this.search.bind(this),searchValue:this.state.searchValue})),s.a.createElement(E.a.Toggle,{"aria-controls":"basic-navbar-nav"}),s.a.createElement(E.a.Collapse,{id:"basic-navbar-nav"},s.a.createElement(v.a,{className:"mr-auto"},s.a.createElement(F.b,{onClick:this.showToggle,to:"/",className:"nav-link"},"Home"),s.a.createElement(F.b,{onClick:this.showToggle,to:"/world",className:"nav-link"},"World"),s.a.createElement(F.b,{onClick:this.showToggle,to:"/politics",className:"nav-link"},"Politics"),s.a.createElement(F.b,{onClick:this.showToggle,to:"/business",className:"nav-link"},"Business"),s.a.createElement(F.b,{onClick:this.showToggle,to:"/technology",className:"nav-link"},"Technology"),s.a.createElement(F.b,{onClick:this.showToggle,to:"/sports",className:"nav-link"},"Sports")),s.a.createElement("div",{className:"bookmark","data-tip":"Bookmark","data-place":"bottom","data-effect":"solid",onClick:this.showBookmarked}," ",this.state.showBookmarks&&s.a.createElement(j.a,{size:16})||s.a.createElement(j.b,{size:16}),"  "),s.a.createElement(C.a,null),this.state.showBookmarks&&s.a.createElement(U.a,{to:"/favorites"})||s.a.createElement(U.a,{to:"/"}),this.state.showToggle&&!this.state.showBookmarks&&s.a.createElement(re,{updateNewsSource:this.updateNewsSource.bind(this),checked:this.state.checked}))),s.a.createElement(b.a,{fluid:!0},s.a.createElement(U.d,null,s.a.createElement(U.b,{path:"/article",render:function(t){return s.a.createElement(ie,Object.assign({},t,{inBookmarks:e.inBookmarks.bind(e),addBookmark:e.addBookmark.bind(e),removeBookmark:e.removeBookmark.bind(e),hideToggle:e.hideToggle.bind(e),resetSearch:e.resetSearch.bind(e)}))}}),s.a.createElement(U.b,{path:"/world"},s.a.createElement(oe,{cols:12,appState:this.state,section:"world",onComplete:this.doneSwitchingArticles.bind(this)})),s.a.createElement(U.b,{path:"/politics"},s.a.createElement(oe,{cols:12,appState:this.state,section:"politics",onComplete:this.doneSwitchingArticles.bind(this)})),s.a.createElement(U.b,{path:"/business"},s.a.createElement(oe,{cols:12,appState:this.state,section:"business",onComplete:this.doneSwitchingArticles.bind(this)})),s.a.createElement(U.b,{path:"/technology"},s.a.createElement(oe,{cols:12,appState:this.state,section:"technology",onComplete:this.doneSwitchingArticles.bind(this)})),s.a.createElement(U.b,{path:"/sports"},s.a.createElement(oe,{cols:12,appState:this.state,section:"sport",onComplete:this.doneSwitchingArticles.bind(this)})),s.a.createElement(U.b,{path:"/search",render:function(t){return s.a.createElement(ce,Object.assign({},t,{hideToggle:e.hideToggle.bind(e)}))}}),s.a.createElement(U.b,{path:"/favorites"},0===this.state.bookmarkedArticles.length&&s.a.createElement("h2",{className:"noArticles centered mt-3"},"You have no saved articles"),0!==this.state.bookmarkedArticles.length&&s.a.createElement("h2",{className:"centered mt-3"},"Favorites"),s.a.createElement(f.a,null,this.state.bookmarkedArticles.map((function(t){return s.a.createElement(ae,{type:"small",cols:3,source:t,key:t.webTitle,removeBookmark:e.removeBookmark.bind(e)})})))),s.a.createElement(U.b,{path:"/"},s.a.createElement(oe,{cols:12,appState:this.state,section:"",onComplete:this.doneSwitchingArticles.bind(this)}))))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(276);o.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(he,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[159,1,2]]]);
//# sourceMappingURL=main.0778913f.chunk.js.map